## DROM_BOT - это проект по созданию телеграм-бота, который собирает информацию о пользователе и на ее основе позволяет делать запрос на сайт о продаже авто Drom.ru. В качестве ответа бот отправляет пользователю данные из объявлений.

### Используемые технологии: PyCharm, Python (pyTelegramBotAPI, Selenium, BeautifulSoup, numpy, pandas, matplotlib, re, os, time, hashlib, pymorphy2).

**Важно: проект изначально не был направлен на извлечение выгоды. Он не удовлетворяет какой-либо потребности пользователя и не решает какую-то важную задачу. Его осуществление связано с отработкой и демонстрацией теоретических знаний и технических навыков.**

Конечной целью реализации телеграм-бота (на основе pyTelegramBotAPI) является предоставление пользователю некоторой информации из интернета.

#### Соответственно, в боте предусмотрены:
- процедура авторизации, которая направлена на определение текущего состояния пользователя: первое взаимодействие / готовый запрос. Данный механизм также дает возможность отслеживать историю запросов пользователя и предлагать ему повторить уже готовый (прошлый) запрос при новом взаимодействии. Используются: питоновские словари (ключ (id чата) - значение (объект класса User)), хеш-функция (для придания уникальности каждому запросу).
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/1.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
- процедура формирования запроса, которая предполагает сбор информации о пользователе и его желаемом поисковом запросе к сайту Drom.ru. Запросы являются лишь отчасти унифицированными, так как пользователю предоставляется все возможные альтернативы поиска, которые поддерживает сайт. Данная процедура подразумевает также возможность коррекции ошибок, допущенных в ходе формирования запроса. Используются: питоновские словари с информацией по всем регионам / населенным пунктам, а также маркам / моделям авто, доступным на сайте (веб-скрейпинг и парсинг данных через Selenium и BeautifulSoup).
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/2.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/3.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/4.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/5.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/6.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
- процедура поиска информации, которая по своей сути является парсером данных с выдачи объявлений по запросу на сайте. Информация, доступная в объявлении, собирается по максимуму и занисится в базу данных. Функция, реализующая сбор информации - адаптивна: в боте она ограничена на поиск с первой страницы выдачи объявлений (для того, чтобы не растягивать и так не быструю работу парсера). Однако, в ней прописаны настройки, позволяющие использовать ее для бесконечного поиска по сайту, что дает возможность формировать большие массивы данных о продаже авто в РФ (вне рамок функционала бота). Используются: Selenium и BeautifulSoup, питоновские структуры данных, библиотеки re, time.
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/7.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
- процедура предоставления объявлений пользователю на основе собранных данных. Бот формирует сообщения исходя из имеющихся данных, а также кнопки, которые прикреплены к каждому "объявлению". Отправив все имеющиеся сообщения, бот создает сводную таблицу (минимум, свреднее, максимум) по наиболее важным показателям при продаже авто. Одна из кнопок позволяет пользователю изучить динамику цен на авто в конкретном объявлении, другая (url-кнопка) - перейти на сайт непосредственно к объявлению. Используются: библиотеки pandas, matplotlib, os, hashlib.

![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/8.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/9.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)
![](https://github.com/maxzhrvl/projects/blob/main/DS_course_HSE/DROM_BOT/readme_img/10.png?token=GHSAT0AAAAAAB22OEAFHWD7MHLOVSSU6BRKY35ETDQ.png)

#### Таким образом, реализация бота:
- не предусматривает сообщений, на которые бот отвечает неадекватно
- поддерживает линию взаимодействия с пользователем
- имеет расширенный функционал (уточнение запроса, обрабатка ошибок в запросе, агрегирование информации и т.д.)
- содержит взаимодействие с базой данных и набором стадий взаимодействия с пользователем
- формирует поисковый запрос с использованием Selenium и возвращает ответ
- парсит данные и созадет pandas-датафреймы
- подразумевает отрисовку графиков (встроенные методы визуализации)

#### В качестве будущих направлений развития представляются возможными:
- "онлайн" версия бота, которая будет работать автономно: перенос бота на сервер (попытки уже были предприяты, но возникли трудности с драйвером Selenium)
- расширение возможностей для составления запроса (до всех доступных на сайте), которые позволят уточнить запрос и сделать выдачу объявлений более персональной
- внедрение ML-моделей для решения какой-либо задачи, связанной с поиском авто (на основе собранного датасета объявлений о продаже авто)
